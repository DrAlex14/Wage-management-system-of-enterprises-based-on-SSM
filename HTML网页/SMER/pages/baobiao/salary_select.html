<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>工资查询</title>

		<link href="../../css/bootstrap.min.css" rel="stylesheet">
		<link href="../../font-awesome/css/font-awesome.css" rel="stylesheet">
		<link href="../../css/plugins/datapicker/datepicker3.css" rel="stylesheet">
		<link href="../../css/animate.css" rel="stylesheet">
		<link href="../../css/style.css" rel="stylesheet">
		<link href="../../css/plugins/dataTables/datatables.min.css" rel="stylesheet">

	</head>

	<body>

		<div id="wrapper">

			<nav class="navbar-default navbar-static-side" role="navigation">
				<div class="sidebar-collapse">
					<a class="close-canvas-menu"><i class="fa fa-times"></i></a>
					<!--右侧菜单开始-->
					<nav class="navbar-default navbar-static-side" role="navigation">
						<div class="sidebar-collapse">
							<a class="close-canvas-menu"><i class="fa fa-times"></i></a>
							<!--右侧菜单开始-->
							<ul class="nav metismenu" id="side-menu">
								<li class="nav-header">
									<div class="dropdown profile-element" align="center">
										<a data-toggle="dropdown" class="dropdown-toggle" href="off_canvas_menu.html#"> <span class="clear"> <span
							class="block m-t-xs"> <strong class="font-bold">项目分类</strong>
						</span></span>
										</a>
									</div>
								</li>
								<li>
									<a href="fixedSalaryManagement/fixed_salary_management_select.html"><i class="fa fa-th-large"></i> <span class="nav-label">工资项目管理</span> <span class="fa arrow"></span></a>
									<ul class="nav nav-second-level collapse">
										<li>
											<a href="../projects/projectsAdd.html">工资项目增加</a>
										</li>
										<li>
											<a href="../projects/projectsSelect.html">工资项目查询</a>
										</li>

									</ul>
								</li>
								<li>
									<a href="../fixedSalaryManagement/fixed_salary_management_select.html"><i class="fa fa-bar-chart-o"></i> <span class="nav-label">固定工资管理</span></a>
								</li>

								<li>
									<a href="#"><i class="fa fa-edit"></i> <span class="nav-label">导入项目管理</span><span class="fa arrow"></span></a>
									<ul class="nav nav-second-level collapse">
										<li>
											<a href="../import_project/insertImport.html">导入项目录入</a>
										</li>
										<li>
											<a href="../import_project/selectImport.html">查询导入项目</a>
										</li>
									</ul>
								</li>

								<li>
									<a href="../salarySettlements/salary_settlement.html"><i class="fa fa-flask"></i> <span class="nav-label">工资结算</span></a>
								</li>
								<li>
									<a href="#"><i class="fa fa-picture-o"></i> <span class="nav-label">报表</span><span class="fa arrow"></span></a>
									<ul class="nav nav-second-level collapse">
										<li>
											<a href="../baobiao/salary_select.html">工资查询</a>
										</li>
										<li>
											<a href="#">工资统计<span class="fa arrow"></span></a>
											<ul class="nav nav-third-level">

												<li>
													<a href="../baobiao/company.html">公司</a>
												</li>
												<li>
													<a href="../baobiao/departments.html">部门</a>
												</li>
												<li>
													<a href="../baobiao/employees.html">员工</a>
												</li>
											</ul>
									</ul>
									</li>

							</ul>
							<!--右侧菜单开结束-->
						</div>
					</nav>
					<!--右侧菜单开结束-->
				</div>
			</nav>

			<div id="page-wrapper" class="gray-bg">
				<div class="row border-bottom">
					<!--上侧导航条开始-->
					<nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0">
						<div class="navbar-header">
							<a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
							<form role="search" class="navbar-form-custom" action="search_results.html">
								<div class="form-group">
									<input type="text" placeholder="Menu" class="form-control" name="top-search" id="top-search" disabled="disabled">
								</div>
							</form>
						</div>
						<ul class="nav navbar-top-links navbar-right">
							<li><span class="m-r-sm text-muted welcome-message">工资管理系统</span>
							</li>
							<li class="dropdown">
								<a class="dropdown-toggle count-info" data-toggle="dropdown" href="main.html#"> <i class="fa fa-bell"></i>
									<span>管理员${sessionScope.userName }</span>
								</a>
							</li>

							<li>
								<a href="../../login.html"> <i class="fa fa-sign-out"></i> 退出
								</a>
							</li>
						</ul>

					</nav>
					<!--上侧导航条结束-->
				</div>
				<div class="row wrapper border-bottom white-bg page-heading">
					<div class="col-sm-4">
						<h2>DHC工资管理系统</h2>
						<ol class="breadcrumb">
							<li>
								<a href="../main.html">Home</a>
							</li>
							<li class="active"><strong>/工资查询</strong></li>
						</ol>
					</div>
				</div>
				<div class="wrapper wrapper-content  animated fadeInRight article">
					<div class="row">
						<div class="col-lg-20 col-lg-offset-1">
							<div class="ibox">
								<div class="col-md-10">
									<div class="panel panel-default">
										<div class="panel-heading">
											<h3 class="panel-title">工资查询</h3>
										</div>
										<div class="panel-body">
											<form class="form-horizontal" action="${pageContext.request.contextPath}/baobiao/listSelect" method="post">
												<div class="form-group">
													<label class="col-sm-2 control-label">部门名称</label>
													<div class="col-sm-10">
														<select class="select2_demo_1 form-control " id="departmentId" name="departmentId">
															<option value="">请选择...</option>
															<c:forEach items="${requestScope.deptList}" var="departments">
																<option value="${departments.departmentId}">${departments.departmentName}</option>
															</c:forEach>
														</select> <br />
													</div>
													<br>
												</div>
												<div class="form-group">
													<label for="inputtext1" class="col-sm-2 control-label">员工姓名</label>
													<div class="col-sm-10">
														<select class="select2_demo_1 form-control " id="employeeId" name="employeeId">
															<option value="">请选择...</option>
															<c:forEach items="${requestScope.listEmployees}" var="employee">
																<option value="${employee.employeeId}">${employee.employeeName}</option>
															</c:forEach>
														</select> <br />
													</div>

												</div>
												<br>
												<div class="form-group" id="data_3">
													<label for="departmentName" class="col-sm-2 control-label">开始日期</label>
													<div class="input-group date">
														<span class="input-group-addon"> <i
														class="fa fa-calendar"></i>
													</span> <input type="text" class="form-control" readonly="readonly" name="date1" id="date1">
													</div>
												</div>
												<br />
												<div class="form-group" id="data_4">
													<label for="departmentName" class="col-sm-2 control-label">结束日期</label>
													<div class="input-group date">
														<span class="input-group-addon"> <i
														class="fa fa-calendar"></i>
													</span> <input type="text" class="form-control" readonly="readonly" name="date2" id="date2">
													</div>
												</div>

												<div class="text-right">
													<div class="col-sm-offset-2 col-sm-10">
														<button type="submit" class="btn btn-default">查询</button>
														<button type="reset" class="btn btn-default">重置</button>
													</div>
												</div>

											</form>
										</div>

										<div class="panel panel-default">
											<div class="panel-heading">
												<h3 class="panel-title">查询结果</h3>
											</div>
											<div class="panel-body">

												<div class="row">
													<div class="col-lg-12">
														<div class="ibox float-e-margins">

															<div class="ibox-content">

																<div class="table-responsive">
																	<table class="table table-striped table-bordered table-hover dataTables-example">
																		<thead>
																			<tr>
																				<td>员工编号</td>
																				<td>员工姓名</td>
																				<td>部门名称</td>
																				<td>导入日期</td>
																				<c:forEach items="${ requestScope.listProjects}" var="project">
																					<c:if test="${ project.addorsubtract <= 3}">
																						<td>${ project.projectName}<input type="hidden" value="project.projecId"></td>
																					</c:if>
																				</c:forEach>
																				<td>总计</td>
																			</tr>
																		</thead>
																		<tbody>
																			<c:forEach items="${ requestScope.listSalarySelectForm}" var="salarySelectForm">
																				<tr>
																					<td>${ salarySelectForm.employeeId }</td>
																					<td>${ salarySelectForm.employeeName }</td>
																					<td>${ salarySelectForm.departmentName }</td>
																					<td>
																						<fmt:formatDate pattern="yyyy-MM" value="${ salarySelectForm.importDate}" />
																					</td>

																					<c:set var="salarySum" value="0"></c:set>
																					<c:forEach items="${ requestScope.listProjects}" var="project1">
																						<c:set var="flag" value="0"></c:set>
																						<c:if test="${ project1.addorsubtract <= 3  }">
																							<c:forEach items="${salarySelectForm.projectId }" var="projectId" varStatus="ind">
																								<c:if test="${projectId eq project1.projectId }">
																									<td>${salarySelectForm.money[ind.count-1] }</td>
																									<c:set var="salarySum" value="${salarySum + salarySelectForm.money[ind.count-1] }"></c:set>
																									<c:set var="flag" value="1"></c:set>
																								</c:if>
																							</c:forEach>
																							<c:if test="${flag eq '0' }">
																								<td>0</td>
																							</c:if>
																						</c:if>
																					</c:forEach>
																					<td>${salarySum }</td>
																				</tr>
																			</c:forEach>
																		</tbody>
																	</table>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!--底部显示-->
				<div class="footer">
					<div class="pull-right">
						<strong>大连华信培训中心定制二班</strong>第五组
					</div>
					<div>
						<strong>Web</strong> for DHC &copy; 2019-2020
					</div>
				</div>
			</div>
		</div>
		<!-- Mainly scripts -->
		<script src="../../js/jquery-2.1.1.js"></script>
		<script src="../../js/bootstrap.min.js"></script>
		<script src="../../js/plugins/metisMenu/jquery.metisMenu.js"></script>
		<script src="../../js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
		<script src="../../js/plugins/jeditable/jquery.jeditable.js"></script>
		<script src="../../js/plugins/dataTables/datatables.min.js"></script>

		<!-- Data picker -->
		<script src="../../js/plugins/datapicker/bootstrap-datepicker.js"></script>
		<!-- Custom and plugin javascript -->
		<script src="../../js/inspinia.js"></script>
		<script src="../../js/plugins/pace/pace.min.js"></script>
		<!-- Page-Level Scripts -->

		<script>
			$(document)
				.ready(
					function() {
						$('.dataTables-example')
							.DataTable({
								dom: '<"html5buttons"B>lTfgitp',
								buttons: [{
										extend: 'copy'
									},
									{
										extend: 'csv'
									},
									{
										extend: 'excel',
										title: 'ExampleFile'
									},
									{
										extend: 'pdf',
										title: 'ExampleFile'
									},

									{
										extend: 'print',
										customize: function(
											win) {
											$(
													win.document.body)
												.addClass(
													'white-bg');
											$(
													win.document.body)
												.css(
													'font-size',
													'10px');

											$(
													win.document.body)
												.find(
													'table')
												.addClass(
													'compact')
												.css(
													'font-size',
													'inherit');
										}
									}
								]

							});
						/* Init DataTables */
						var oTable = $('#editable').DataTable();

						/* Apply the jEditable handlers to the table */
						oTable
							.$('td')
							.editable(
								'../example_ajax.php', {
									"callback": function(sValue, y) {
										var aPos = oTable
											.fnGetPosition(this);
										oTable.fnUpdate(sValue,
											aPos[0], aPos[1]);
									},
									"submitdata": function(value,
										settings) {
										return {
											"row_id": this.parentNode
												.getAttribute('id'),
											"column": oTable
												.fnGetPosition(this)[2]
										};
									},

									"width": "90%",
									"height": "100%"
								});

					});

			function fnClickAddRow() {
				$('#editable').dataTable()
					.fnAddData(
						["Custom row", "New row", "New row", "New row",
							"New row"
						]);

			}
		</script>

		<script>
			$('body.canvas-menu .sidebar-collapse').slimScroll({
				height: '100%',
				railOpacity: 0.9
			});
			$(document).ready(function() {
				$('#data_4 .input-group.date').datepicker({
					minViewMode: 1,
					keyboardNavigation: false,
					forceParse: false,
					autoclose: true,
					todayHighlight: true
				});
				$('#data_3 .input-group.date').datepicker({
					minViewMode: 1,
					keyboardNavigation: false,
					forceParse: false,
					autoclose: true,
					todayHighlight: true
				});

			});
		</script>

	</body>

</html>